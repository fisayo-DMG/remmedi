(this["webpackJsonprem-medi"]=this["webpackJsonprem-medi"]||[]).push([[0],{32:function(e,a,t){e.exports=t(66)},37:function(e,a,t){},39:function(e,a,t){e.exports=t.p+"static/media/logo.5d5d9eef.svg"},40:function(e,a,t){},66:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(17),c=t.n(l),o=(t(37),t(9)),s=t(7),m=t.n(s),i=t(13),u=t(5),p=(t(39),t(40),t(2)),d=function(e){var a=e.logout;return r.a.createElement("header",{className:"inner"},r.a.createElement("h2",null,r.a.createElement(p.b,{to:"/"},r.a.createElement("i",{className:"fas fa-prescription-bottle-alt"})," RemMedi")),r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(p.b,{to:"/"},"Prescriptions")),r.a.createElement("li",null,r.a.createElement(p.b,{to:"/add"},"Add Prescription")),r.a.createElement("li",null,r.a.createElement(p.b,{to:"/",onClick:a},"Log Out")))))},E=function(e){var a=e.start,t=e.end,n=e.numOfTimesPerDay,l=e.numOfTablets,c=e.completedDosage,o=e.completeDosage,s=e.id,m=new Date(a),i=m.toDateString(),u=function(e,a){for(var t=[],n=new Date(e);n<=a;)t.push(new Date(n).toUTCString()),n.setDate(n.getDate()+1);return t}(m,new Date(t)).length,d=1===n?"once a day":"".concat(n," times daily"),E=1===u?"one day":"".concat(u," days"),g=1===l?"one tablet":"".concat(l," tablets");return r.a.createElement("div",{className:"gig"},r.a.createElement("h3",null,e.name),r.a.createElement("p",null,"Take ",g," ",d," for ",E," starting from ",i,"."),r.a.createElement("ul",null,r.a.createElement("li",null,"Completed: ",r.a.createElement("input",{type:"checkbox",name:"completedDosage",checked:c,onChange:function(){return o(s)}})),r.a.createElement("li",null,r.a.createElement(p.b,{to:"/details",className:"btn btn-reverse",style:{marginLeft:"40px"}},"Details"))))},g=function(e){Object(n.useEffect)((function(){e.getPrescriptions(),console.log("use effect")}),[]);var a=e.completeDosage,t=e.data.map((function(e){return r.a.createElement(E,{key:e._id,name:e.name,start:e.startDate,end:e.endDate,numOfTimesPerDay:e.numOfTimesPerDay,numOfTablets:e.numOfTablets,id:e._id,completedDosage:e.completedDosage,completeDosage:a})}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{id:"gigs",className:"container"},r.a.createElement("h1",null,"Prescriptions"),t))},f=t(10),b=(t(46),t(48),function(e){var a=e.addPrescription,t=Object(n.useState)({name:"",numOFTablets:"",numOfTimesPerDay:"",startDate:"",endDate:""}),l=Object(u.a)(t,2),c=l[0],s=l[1];console.log("ADD PRESCRIPTION");var m=function(e){var a=e.target,t=a.name,n=a.value;s((function(e){return Object(o.a)({},e,Object(f.a)({},t,n))}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{id:"add",className:"container"},r.a.createElement("div",{className:"form-wrap"},r.a.createElement("h1",null,"Add A Prescription"),r.a.createElement("p",null,"Lorem Ipsum"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t={name:c.name,numOfTablets:Number(c.numOFTablets),numOfTimesPerDay:Number(c.numOfTimesPerDay),startDate:c.startDate,endDate:c.endDate,completedDosage:!1};a(t)}},r.a.createElement("div",{className:"input-group"},r.a.createElement("label",{htmlFor:"name"},"Name of Drug"),r.a.createElement("input",{type:"text",name:"name",id:"name",className:"input-box",placeholder:"Enter the name of the drug, eg. Panadol",value:c.name,onChange:m})),r.a.createElement("div",{className:"input-group"},r.a.createElement("label",{htmlFor:"numOFTablets"},"Number of Tablets"),r.a.createElement("input",{type:"number",name:"numOFTablets",id:"numOFTablets",className:"input-box",placeholder:"Enter the number of tablets per dosage",value:c.numOFTablets,onChange:m})),r.a.createElement("div",{className:"input-group"},r.a.createElement("label",{htmlFor:"numOfTimesPerDay"},"Daily Dosage"),r.a.createElement("select",{name:"numOfTimesPerDay",onChange:m,id:"numOfTimesPerDay",className:"input-box",placeholder:"Select an option",value:c.numOfTimesPerDay},r.a.createElement("option",{value:"",disabled:!0,hidden:!0},"Select your option"),r.a.createElement("option",{value:1},"Once a day"),r.a.createElement("option",{value:2},"Twice daily"),r.a.createElement("option",{value:3},"Thrice daily"))),r.a.createElement("div",{className:"input-group"},r.a.createElement("label",{htmlFor:"startDate"},"Start Date"),r.a.createElement("input",{required:!0,type:"date",name:"startDate",id:"startDate",className:"input-box",onChange:m,value:c.startDate})),r.a.createElement("div",{className:"input-group"},r.a.createElement("label",{htmlFor:"endDate"},"End Date"),r.a.createElement("input",{required:!0,type:"date",name:"endDate",id:"endDate",className:"input-box",onChange:m,value:c.endDate})),r.a.createElement("input",{type:"submit",value:"Add Prescription",className:"btn btn-reverse"})))))}),v=function(e){var a=e.signup,t=Object(n.useState)({firstName:"",lastName:"",dateOfBirth:"",email:"",password:""}),l=Object(u.a)(t,2),c=l[0],s=l[1],m=function(e){var a=e.target,t=a.name,n=a.value;s((function(e){return Object(o.a)({},e,Object(f.a)({},t,n))}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{id:"add",className:"container"},r.a.createElement("div",{className:"form-wrap"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=c.firstName,n=c.lastName,r=c.dateOfBirth,l=c.email,o=c.password;a({firstName:t,lastName:n,dateOfBirth:r,email:l,password:o})}},r.a.createElement("div",{className:"input-group"},r.a.createElement("label",{htmlFor:"firstName"},"First Name"),r.a.createElement("input",{type:"text",name:"firstName",id:"firstName",className:"input-box",placeholder:"Enter your first name",value:c.firstName,onChange:m})),r.a.createElement("div",{className:"input-group"},r.a.createElement("label",{htmlFor:"lastName"},"Last Name"),r.a.createElement("input",{type:"text",name:"lastName",id:"lastName",className:"input-box",placeholder:"Enter your last name",value:c.lastName,onChange:m})),r.a.createElement("div",{className:"input-group"},r.a.createElement("label",{htmlFor:"startDate"},"Date of Birth"),r.a.createElement("input",{required:!0,type:"date",name:"dateOfBirth",id:"startDate",className:"input-box",value:c.dateOfBirth,onChange:m})),r.a.createElement("div",{className:"input-group"},r.a.createElement("label",{htmlFor:"email"},"E-mail"),r.a.createElement("input",{type:"email",name:"email",id:"email",className:"input-box",placeholder:"Enter your email address",value:c.email,onChange:m})),r.a.createElement("div",{className:"input-group"},r.a.createElement("label",{htmlFor:"numOFTablets"},"Password"),r.a.createElement("input",{type:"password",name:"password",id:"numOFTablets",className:"input-box",placeholder:"Enter password",value:c.password,onChange:m})),r.a.createElement("input",{type:"submit",value:"Sign Up",className:"btn btn-reverse"})))))},h=function(e){var a=e.login,t=Object(n.useState)({email:"",password:""}),l=Object(u.a)(t,2),c=l[0],s=l[1],m=function(e){var a=e.target,t=a.name,n=a.value;s((function(e){return Object(o.a)({},e,Object(f.a)({},t,n))}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{id:"add",className:"container"},r.a.createElement("div",{className:"form-wrap"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t={email:c.email,password:c.password};a(t)}},r.a.createElement("div",{className:"input-group"},r.a.createElement("label",{htmlFor:"signinName"},"Username"),r.a.createElement("input",{type:"text",name:"email",id:"signinName",className:"input-box",placeholder:"Enter your email as your username",value:c.name,onChange:m})),r.a.createElement("div",{className:"input-group"},r.a.createElement("label",{htmlFor:"signinPassword"},"Password"),r.a.createElement("input",{type:"password",name:"password",id:"signinPassword",className:"input-box",placeholder:"Enter password",value:c.password,onChange:m})),r.a.createElement("input",{type:"submit",value:"Login",className:"btn btn-reverse"})))))},N=t(11),D=function(e){var a=e.login,t=e.signup;return Object(n.useEffect)((function(){console.log("LANDING PAGE")}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{id:"add",className:"container"},r.a.createElement("div",{className:"form-wrap"},r.a.createElement("h2",null,r.a.createElement(p.b,{to:"/"},r.a.createElement("i",{className:"fas fa-prescription-bottle-alt"})," RemMedi")),r.a.createElement("header",{className:"inner"},r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(p.b,{to:"/"},"Login")),r.a.createElement("li",null,r.a.createElement(p.b,{to:"/register"},"Register"))))),r.a.createElement(N.d,null,r.a.createElement(N.b,{exact:!0,path:"/",component:function(e){return r.a.createElement(h,{login:a})}}),r.a.createElement(N.b,{exact:!0,path:"/register",component:function(e){return r.a.createElement(v,{signup:t})}})))))},O=t(14),y=t.n(O);var w=function(){var e=Object(n.useState)([]),a=Object(u.a)(e,2),t=a[0],l=a[1],c=Object(n.useState)(!0),s=Object(u.a)(c,2),p=(s[0],s[1]),E=Object(n.useState)(null),f=Object(u.a)(E,2),v=(f[0],f[1],Object(n.useState)(!1)),h=Object(u.a)(v,2),O=h[0],w=h[1],x=Object(n.useState)("data"),T=Object(u.a)(x,2),j=T[0],S=T[1];Object(n.useEffect)((function(){console.log("app.js use effect"),localStorage.getItem("remmediUserToken")?(S(localStorage.getItem("remmediUserData")),w(!0)):w(!1)}),[]);var k=function(){var e=Object(i.a)(m.a.mark((function e(a){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("LOG IN"),t={headers:{"Content-Type":"application/json"}},e.prev=2,e.next=5,y.a.post("/api/v1/users/login",a,t);case 5:"success"===(n=e.sent).data.status?(localStorage.setItem("remmediUserToken",n.data.token),console.log(n.data,"USER DATA"),localStorage.setItem("remmediUserData",n.data.userData.userId),S(localStorage.getItem("remmediUserData")),w(!0)):console.log("What is going on?"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(a){return e.apply(this,arguments)}}(),P=function(){var e=Object(i.a)(m.a.mark((function e(a){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("SIGN IN"),t={headers:{"Content-Type":"application/json"}},e.prev=2,e.next=5,y.a.post("/api/v1/users/signup",a,t);case 5:e.sent,k({email:a.email,password:a.password}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(a){return e.apply(this,arguments)}}(),F=function(){var e=Object(i.a)(m.a.mark((function e(a){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(o.a)({},a,{userID:j.userId,email:j.email}),n={headers:{"Content-Type":"application/json","x-access-token":localStorage.getItem("remmediUserToken")}},console.log(t),e.prev=3,e.next=6,y.a.post("/api/v1/prescriptions",t,n);case 6:e.sent,console.log("Hello"),C(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.log("err");case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(a){return e.apply(this,arguments)}}();function C(){return I.apply(this,arguments)}function I(){return(I=Object(i.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return{headers:{"Content-Type":"application/json","x-access-token":localStorage.getItem("remmediUserToken")}},e.prev=1,e.next=4,y.a.get("/api/v1/prescriptions/".concat(j));case 4:a=e.sent,p(!1),l(a.data.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0,"setError");case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function U(e){return A.apply(this,arguments)}function A(){return(A=Object(i.a)(m.a.mark((function e(a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={id:a,completedDosage:!t.find((function(e){return e._id===a})).completedDosage},r={headers:{"Content-Type":"application/json"}},e.prev=2,e.next=5,y.a.post("/api/v1/prescriptions/update",n,r);case 5:e.sent,console.log("complete dosage"),C(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0,"NOT complete dosage");case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}return O?r.a.createElement("div",null,r.a.createElement(d,{logout:function(){return w(!1),localStorage.removeItem("remmediUserToken"),localStorage.removeItem("remmediUserData"),r.a.createElement(N.a,{to:"/"})}}),r.a.createElement(N.d,null,r.a.createElement(N.b,{exact:!0,path:"/",component:function(e){return r.a.createElement(g,{userData:j,data:t,completeDosage:U,getPrescriptions:C})}}),r.a.createElement(N.b,{path:"/add",component:function(e){return r.a.createElement(b,{addPrescription:F})}}))):r.a.createElement("div",null,r.a.createElement(D,{login:k,signup:P}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(p.a,null,r.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.e6cb17e9.chunk.js.map